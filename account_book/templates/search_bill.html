{% extends "layout.html" %}
{% block content %}

<div class="container-fluid">
    <!-- Dropdown -->
    <div class="main-content">
	<div class="accordion" id="accordionExample">
	    <div class="card">
		<div class="card-header" id="headingOne">
		    <h2 class="mb-0">
			<legend>Search Bill</legend>
		    </h2>
		</div>
	    </div>
	    <form>
		<div class="form-group card-body card-background" id="add-bill">
		    <div class="row">
			<div class="add-bill-item col-md-2">
			    {{ form.category.label(class="form-control-lable") }}
                            {{ form.category(class="form-control") }}
			</div>
			<div class="add-bill-item col-md-2">
			    {{ form.year.label(class="form-control-lable") }}
                            {{ form.year(class="form-control") }}
			</div>
			<div class="add-bill-item col-md-2">
			    {{ form.month.label(class="form-control-lable") }}
                            {{ form.month(class="form-control") }}
			</div>
			<div class="add-bill-item col-md-6">
			    {{ form.date.label(class="form-control-lable") }}
                            {{ form.date(class="form-control") }}
			</div>
		    </div>
		    <div style="padding-top:15px;">
			{{ form.submit(class="btn btn-outline-primary") }}
		    </div>
	    </form>
		</div>
		<div class="bill-container">
		    <table class="table">
			<thead>
			    <tr>
				<th scope="col">Date</th>
				<th scope="col">Category</th>
				<th scope="col">Cost</th>
				<th scope="col">Comment</th>
				<th scope="col">#</th>
			    </tr>
			</thead>
			<tbody>
			    {% for bill in bills %}
			    <tr>
				<th scope="row">{{ bill.date_value }}</th>
				<td>{{ bill.category_value }}</td>
				<td>${{ bill.cost_value }}</td>
				<td>{{ bill.comment_value }}</td>
				<td>
				    <!-- <button type="button" class="btn btn-outline-info" data-toggle="modal" data-target="#edit-modal">Edit</button> -->
				    <button type="button" class="btn btn-outline-info" data-toggle="modal" data-target="#edit-{{bill.index_value}}-modal">Edit</button>
				    <button type="button" class="btn btn-outline-danger" data-toggle="modal" data-target="#delete-{{bill.index_value}}-modal">Delete</button>
				</td>
			    </tr>
                            {% endfor %}
			</tbody>
		    </table>
		</div>
		{% for bill in bills %}		
		<div class="modal fade" id="edit-{{bill.index_value}}-modal" tabindex="-1" role="dialog" aria-labelledby="EditModalLabel" aria-hidden="true">
		    <div class="modal-dialog" role="document">
			<div class="modal-content">
			    <div class="modal-header modal-color-header">
				<h5 class="modal-title" id="exampleModalLabel">Edit Bill</h5>
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
				    <span aria-hidden="true">&times;</span>
				</button>
			    </div>
			    <div class="modal-body">
				<form>
				    <div class="form-group">
					{{ bill.cost.label(class="form-control-lable") }}
					{% if bill.cost.errors %}
					{{ bill.cost(class="form-control is-invalid") }}
					<div class="finvalid-feedback">
					    {% for error in form.cost.errors %}
					    <span> {{ error }}</span>
					    {% endfor%}
					</div>
					{% else %}
					{{ bill.cost(class="form-control",value=bill.cost_value) }}
					{% endif %}
				    </div>
				    <div class="form-group">
					{{ bill.tax_bool.label(class="form-control-lable") }}
					<div class="input-group">
					    <div class="input-group-prepend">
						<div class="input-group-text">
						    {{ bill.tax_bool() }}
						</div>
					    </div>
					    {{ bill.tax_rate(class="form-control") }}
					</div>
				    </div>
				    <div class="form-group">
					{{ bill.category.label(class="form-control-lable") }}
					{{ bill.category(class="form-control", value=bill.category_value) }}
				    </div>
				    <div class="form-group">
					{{ bill.date.label(class="form-control-lable") }}
					{{ bill.date(class="form-control", value=bill.date_value) }}
				    </div>
				    <div class="form-group">
					{{ bill.comment.label(class="form=control-lable") }}
					{% if bill.comment.errors %}
					{{ bill.comment(class="form-control is-invalid") }}
					<div class="invalid-feedback">
					    {% for error in bill.comment.errors %}
					    <span> {{ error }}</span>
					    {% endfor %}
					</div>
					{% else %}
					{{ bill.comment(class="form-control", value=bill.comment_value) }}
					{% endif %}
				    </div>
				</form>
			    </div>
			    <div class="modal-footer">
				<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
				{{ bill.submit(class="btn btn-primary") }}
			    </div>
			</div>
		    </div>
		</div>
		<!-- End Edit Bill Modal -->
		<!-- Bill Delete Modal -->
		<div class="modal fade" id="delete-{{bill.index_value}}-modal" tabindex="-1" role="dialog" aria-labelledby="BillDeleteModalLabel" aria-hidden="true">
		    <div class="modal-dialog" role="document">
			<div class="modal-content">
			    <div class="modal-header modal-color-header">
				<h5 class="modal-title" id="exampleModalLabel">Delete Bill</h5>
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
				    <span aria-hidden="true">&times;</span>
				</button>
			    </div>
			    <div class="modal-body">
				Sure to delete ?
			    </div>
			    <div class="modal-footer">
				<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
				<button type="button" class="btn btn-danger">Delete</button>
			    </div>
			</div>
		    </div>
		</div>
		<!-- End Bill Delete Modal -->
		
		{% endfor %}
	</div>
    </div>
</div>

<!-- TODO: Setting Default value for select tags -->
<!-- <script>
     $("select").each(function(){ $(this).find('option[value="'+$(this).attr("value")+'"]').prop('selected', true); });
     </script> -->

{% endblock content%}
