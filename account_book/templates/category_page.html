{% extends "layout.html" %}
{% block content %}

<div class="container-fluid">
    <!-- Dropdown -->

    <div class="card">
	<div class="card-header" id="headingOne">
	    <h2 class="mb-0">
		{{ category }}
	    </h2>
	</div>
    </div>

    <div class="form-group card-body card-background form-container">
	<div class="row justify-content-center">
	    <div class="col-md-5">
		<p>Cost this 7 days: </p>
		<canvas id="cost-day" width="800" height="600"></canvas>
	    </div>
	    <div class="col-md-5">
		<p>Cost this month: </p>
		<canvas id="cost-month" width="800" height="600"></canvas>
	    </div>
	</div>
	<h3>Budget Counting: </h3>
	<form method="POST" action="">
	    {{ form.hidden_tag() }}
	    <div class="form-check form-check-inline">
		<!-- <input class="form-check-input" type="radio" name="exampleRadios" id="exampleRadios1" value="option1" checked> -->
		{{ form.count_in_day_budget() }}
		<label class="form-check-label">
		    Count in Day Budget
		</label>
	    </div>
	    <div class="form-check form-check-inline">
		<!-- <input class="form-check-input" type="radio" name="exampleRadios" id="exampleRadios2" value="option2"> -->
		{{ form.count_in_week_budget() }}
		<label class="form-check-label">
		    Count in Week Budget
		</label>
	    </div>
	    <div class="form-check form-check-inline">
		<!-- <input class="form-check-input" type="radio" name="exampleRadios" id="exampleRadios3" value="option2"> -->
		{{ form.count_in_month_budget() }}
		<label class="form-check-label">
		    Count in Month Budget
		</label>
	    </div>
	    <br>
	    <!-- <button type="button" class="btn btn-info">Update</button> -->
	    {{ form.submit(class="btn btn-info") }}
	    <button type="button" class="btn btn-danger" data-toggle="modal" data-target="#delete-category-modal">Delete Category</button>

    </div>
    <!-- modal for delete catagory modal -->
    <div class="modal fade" id="delete-category-modal" tabindex="-1" role="dialog" aria-labelledby="CategoryDeleteModalLabel" aria-hidden="true">
	<div class="modal-dialog" role="document">
	    <div class="modal-content">
		<div class="modal-header modal-color-header">
		    <h5 class="modal-title" id="DeleteBillModal">Delete Bill</h5>
		    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
			<span aria-hidden="true">&times;</span>
		    </button>
		</div>
		<div class="modal-body">
		    Sure to delete "{{ category }}" category?
		</div>
		<div class="modal-footer">
		    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
		    {{ form.delete(class="btn btn-danger") }}
		    <!-- <button type="button" class="btn btn-danger">Delete</button> -->
		</div>
	    </div>
	</form>
	</div>
    </div>
    <!-- end for delete category modal -->
    <div class="bill-container">
	<table class="table">
	    <thead>
		<tr>
		    <th scope="col">Date</th>
		    <th scope="col">Category</th>
		    <th scope="col">Cost</th>
		    <th scope="col">Comment</th>
		    <th scope="col">#</th>
		</tr>
	    </thead>
	    <tbody>
		{% for bill in bills %}
		<tr>
		    <th scope="row">{{ bill.date_value }}</th>
		    <td>{{ bill.category_value }}</td>
		    <td>${{ bill.cost_value }}</td>
		    <td>{{ bill.comment_value }}</td>
		    <td>
			<button type="button" class="btn btn-outline-info" data-toggle="modal" data-target="#edit-{{bill.index_value}}-modal">Edit</button>
			<button type="button" class="btn btn-outline-danger" data-toggle="modal" data-target="#delete-{{bill.index_value}}-modal">Delete</button>
		    </td>
		</tr>
		{% endfor %}
	    </tbody>
	</table>
    </div>
    {% for bill in bills %}

    <div class="modal fade" id="edit-{{bill.index_value}}-modal" tabindex="-1" role="dialog" aria-labelledby="EditModalLabel" aria-hidden="true">
	<div class="modal-dialog" role="document">
	    <div class="modal-content">
		<div class="modal-header modal-color-header">
		    <h5 class="modal-title" id="EditBillModal">Edit Bill</h5>
		    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
			<span aria-hidden="true">&times;</span>
		    </button>
		</div>
		<div class="modal-body">
		    <form method="POST" action="">
			<input type="hidden" name="edit-index" value="{{ bill.index_value }}">
			<div class="form-group">
			    {{ bill.cost.label(class="form-control-label") }}
			    {% if bill.cost.errors %}
			    {{ bill.cost(class="form-control is-invalid") }}
			    <div class="finvalid-feedback">
				{% for error in form.cost.errors %}
				<span> {{ error }}</span>
				{% endfor%}
			    </div>
			    {% else %}
			    {{ bill.cost(class="form-control",value=bill.cost_value) }}
			    {% endif %}
			</div>
			<div class="form-group">
			    {{ bill.tax_bool.label(class="form-control-label") }}
			    <div class="input-group">
				<div class="input-group-prepend">
				    <div class="input-group-text">
					{{ bill.tax_bool() }}
				    </div>
				</div>
				{{ bill.tax_rate(class="form-control") }}
			    </div>
			</div>
			<div class="form-group">
			    {{ bill.category.label(class="form-control-label") }}
			    {{ bill.category(class="form-control", value=bill.category_value) }}
			</div>
			<div class="form-group">
			    {{ bill.date.label(class="form-control-label") }}
			    {{ bill.date(class="form-control", value=bill.date_value) }}
			</div>
			<div class="form-group">
			    {{ bill.comment.label(class="form=control-label") }}
			    {% if bill.comment.errors %}
			    {{ bill.comment(class="form-control is-invalid") }}
			    <div class="invalid-feedback">
				{% for error in bill.comment.errors %}
				<span> {{ error }}</span>
				{% endfor %}
			    </div>
			    {% else %}
			    {{ bill.comment(class="form-control", value=bill.comment_value) }}
			    {% endif %}
			</div>
		</div>
		<div class="modal-footer">
		    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
		    {{ bill.update(class="btn btn-primary") }}
		</div>

	    </div>
	</div>
    </div>
    <!-- End Edit Bill Modal -->
    <!-- Bill Delete Modal -->
    <div class="modal fade" id="delete-{{bill.index_value}}-modal" tabindex="-1" role="dialog" aria-labelledby="BillDeleteModalLabel" aria-hidden="true">
	<div class="modal-dialog" role="document">
	    <div class="modal-content">
		<div class="modal-header modal-color-header">
		    <h5 class="modal-title" id="exampleModalLabel">Delete Bill</h5>
		    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
			<span aria-hidden="true">&times;</span>
		    </button>
		</div>
		<div class="modal-body">
		    Sure to delete ?
		</div>
		<div class="modal-footer">
		    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
		    {{ bill.delete(class="btn btn-danger") }}
		    <!-- <button type="button" class="btn btn-danger">Delete</button> -->
		</div>
	    	    </form>
	    </div>
	</div>
    </div>
    <!-- End Bill Delete Modal -->		
    {% endfor %}

</div>



<script>
 /*  Change it to function ???? */
 var costCanvas = document.getElementById("cost-day");

 var barData = {
     labels: ["Africa", "Asia", "Europe", "Latin America", "North America"],
     datasets: [{
         barPercentage: 0.5,
         barThickness: 6,
         maxBarThickness: 8,
         minBarLength: 2,
         data: [10, 20, 30, 40, 50]
     }]
 };
 

 var barOptions = {
     scales: {
         yAxes: [{
             ticks: {
                 beginAtZero:true
             }
         }]
     }
 }
 
 var myBarChart = new Chart(costCanvas, {
     type: 'bar',
     data: barData,
     options: barOptions
 });
 
</script>

<script>
 var costCanvas = document.getElementById("cost-month");

 var barData = {
     labels: ["Africa", "Asia", "Europe", "Latin America", "kkk"],
     datasets: [{
         barPercentage: 0.5,
         barThickness: 6,
         maxBarThickness: 8,
         minBarLength: 1,
         data: [10, 20, 30, 40, 50]
     }]
 };


 var barOptions = {
     scales: {
         yAxes: [{
             ticks: {
                 beginAtZero:true
             }
         }]
     }
 }

 var myBarChart = new Chart(costCanvas, {
     type: 'bar',
     data: barData,
     options: barOptions
     
 });
 
</script>
{% endblock content%}
